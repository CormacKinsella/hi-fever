
/*

Nextflow config file for hi-fever workflow

*/

// Default parameters

params {

    // Required parameters
    entry = "HIFEVER"
    ftp_file = "data/ftp_list.txt"
    query_file_aa = "data/protein_query.fasta"

    // Directory to store output files
    outdir = "output"
 
    // Clustering parameters
    cluster_query = false  // If set to true, queries require clustering
    mmseqs_minseqid = "0.95"
    mmseqs_cover = "0.90"

    // If this is not set to true, then user needs to provide a diamond query_database
    build_query_db = false
    query_diamond_db = "${params.outdir}/query_db/query_db.dmnd"

    // It this is set to true, then don't get metadata
    dont_get_metada = false // by default we get true, so provide email
    email = ""
    get_metadata_all = false

    // DIAMOND parameters
    diamond_forks = "4"
    chunk_size = "50000"
    diamond_mode = "very-sensitive"
    diamond_matrix = "BLOSUM62"
    diamond_max_target_seqs = "1000"
    
    // Parameters for sequence extraction (to query plus flanking regions)
    interval = "1000" // ??
    flank = "3000" // Flanking regions to extract
    
    // Reciprocal diamond
    full_reciprocal = false // If true, user needs to provide nr and rvdb diamond databases
    reciprocal_db = "data/minimal_reciprocal_db.dmnd"

    // 
    orf_size_nt = "150"
    genewise_matrix = "BLOSUM62"
    stop_task = "remove"
    pairs_per_task = 500

    // Optional parameters
    reciprocal_nr_db = ""
    reciprocal_rvdb_db = ""
    assembly_file = "data/ftp_list.txt"
    

    // for the hi-fever fast workflow
	query_hmms = "data/query_domains.hmmer"

}

// Load cloud config if required

if ( "$params.entry" == "CLOUD" ) {
    includeConfig 'conf/cloud.config'
}
